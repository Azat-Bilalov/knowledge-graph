# Knowledge Graph Diff

A web-based tool for visualizing and comparing medical knowledge graphs generated by different Large Language Models (LLMs).

## Purpose

This application is designed for:
- **Educational use**: Learning about knowledge graphs and medical ontologies
- **Research**: Evaluating consistency and agreement between LLM-generated knowledge
- **Experimentation**: Exploring different input formats for knowledge representation

## Features

- **Multi-LLM Comparison**: Compare knowledge graphs from multiple LLMs side-by-side
- **Four Input Formats**: Support for formats A, B, C, D (see Help modal for details)
- **Interactive Visualization**: Pan, zoom, and inspect graph nodes
- **Diff Graph**: Unified view showing agreement/disagreement between LLMs
- **Agreement Metrics**: Quantitative comparison of parameters, rules, and edges
- **Error Reporting**: Clear feedback on normalization and validation errors

## Quick Start

```bash
# Install dependencies
npm install

# Start development server
npm run dev

# Build for production
npm run build
```

## Usage

1. **Select Format**: Choose the input format (A, B, C, or D) from the dropdown
2. **Paste JSON**: Enter LLM-generated JSON in the editor tabs
3. **Add LLMs**: Click "+" to add more LLM comparison tabs
4. **Render**: Click "Render Graphs" to visualize
5. **Compare**: View individual graphs or the "Diff Graph" tab

## Input Formats

### Format A — Rule-as-Function Graph
Most expressive format with explicit parameter registry and rules.

### Format B — Linear Rule Pipeline
Sequential pipeline where inputs/outputs are inferred from logic.

### Format C — Atomic Rule Blocks
Self-contained rules with typed parameters.

### Format D — Parameter-centric Rules
Knowledge organized around parameters.

See the Help modal (?) in the app for detailed examples and LLM prompts.

## Diff Graph Color Coding

| Color  | Meaning                              |
|--------|--------------------------------------|
| Black  | Common - present in ALL LLMs         |
| Orange | Partial - present in SOME LLMs       |
| Red    | Unique - present in only ONE LLM     |

## Technology Stack

- **Framework**: React 18 with TypeScript
- **Build Tool**: Vite
- **Styling**: Tailwind CSS
- **Code Editor**: Monaco Editor
- **Graph Rendering**: Graphviz (via @viz-js/viz WASM)

## Architecture

The project follows Feature-Sliced Design (FSD) lightweight profile:

```
src/
├── app/              # Application entry and state
├── features/         # Feature modules
│   ├── editor/       # Code editor components
│   ├── visualization/# Graph rendering pipeline
│   ├── diff/         # Multi-graph comparison
│   └── help/         # Help documentation
├── entities/         # Domain entities
│   ├── normalization/# Format normalization engine
│   └── validation/   # Graph validation
└── shared/           # Shared utilities and types
    ├── types/        # TypeScript type definitions
    ├── ui/           # Reusable UI components
    └── lib/          # Utility functions
```

## Canonical Model

All formats are normalized into a canonical bipartite graph:
- **Parameter nodes**: Medical variables or derived facts
- **Rule nodes**: Deterministic transformations
- **Edges**: Parameter → Rule (input) and Rule → Parameter (output)

## Constraints

- **Client-side only**: No backend required
- **No data persistence**: Refresh clears all data
- **Rule logic is opaque**: Never executed, treated as text
- **No semantic normalization**: Exact string matching for comparison

## License

Educational and research use.
